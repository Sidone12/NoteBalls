import{d as L,B as U,q as _,r as k,i as C,p as E,e as d,f as u,g as e,y as w,C as g,t as c,l as m,z as y,D as P}from"./index-Bimcwh2I.js";const O={class:"auth"},R={class:"tabs is-centered"},T={class:"card auth-form"},j={class:"card-content"},q={class:"content"},z={class:"title has-text-centered is-4 mb-4"},D={class:"field"},M={class:"control"},N={key:0,class:"help is-danger"},S={class:"field"},I={class:"control"},Z={key:0,class:"help is-danger"},G={key:0,class:"field"},H={class:"control"},J={key:0,class:"help is-danger"},K={key:1,class:"notification is-danger is-light"},Q={class:"field is-grouped is-grouped-right"},W={class:"control"},X=["disabled"],Y=L({__name:"ViewAuth",setup(h){const p=U(),r=_(!1),n=_(!1),i=_(""),t=k({email:"",password:"",confirmPassword:""}),l=k({email:"",password:"",confirmPassword:""}),v=C(()=>r.value?"Register":"Login"),V=C(()=>{const o=Object.values(l).some(a=>a!==""),s=!t.email||!t.password||r.value&&!t.confirmPassword;return!o&&!s});E(r,()=>{A()}),E(t,()=>{i.value&&(i.value="")},{deep:!0});const b={email:o=>o?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)?"":"Please enter a valid email":"Email is required",password:o=>o?o.length<6?"Password must be at least 6 characters":/(?=.*[a-z])(?=.*[A-Z])/.test(o)?"":"Password must contain both uppercase and lowercase letters":"Password is required",confirmPassword:o=>r.value&&!o?"Please confirm your password":r.value&&o!==t.password?"Passwords do not match":""},f=o=>{const s=t[o],a=b[o];a&&(l[o]=a(s))},x=()=>{let o=!0;return Object.keys(b).forEach(s=>{f(s),l[s]&&(o=!1)}),o},A=()=>{t.email="",t.password="",t.confirmPassword="",i.value="",Object.keys(l).forEach(o=>l[o]="")},B=()=>{r.value=!1},F=()=>{r.value=!0},$=async()=>{if(!x()){i.value="Please fix the errors above";return}n.value=!0,i.value="";try{r.value?await p.registerUser(t):await p.loginUser(t),console.log(`${v.value} successful!`)}catch(o){i.value=o.message||`An error occurred during ${v.value.toLowerCase()}`,console.error("Auth error:",o)}finally{n.value=!1}};return(o,s)=>(u(),d("div",O,[e("div",R,[e("ul",null,[e("li",{onClick:g(B,["prevent"]),class:w({"is-active":!r.value})},[...s[6]||(s[6]=[e("a",null,"Login",-1)])],2),e("li",{onClick:g(F,["prevent"]),class:w({"is-active":r.value})},[...s[7]||(s[7]=[e("a",null,"Register",-1)])],2)])]),e("div",T,[e("div",j,[e("div",q,[e("div",z,c(v.value),1),e("form",null,[e("div",D,[s[8]||(s[8]=e("label",{class:"label"},"Email",-1)),e("div",M,[y(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>t.email=a),class:"input",type:"email",placeholder:"e.g. alexsmith@gmail.com",onBlur:s[1]||(s[1]=a=>f("email"))},null,544),[[P,t.email]])]),l.email?(u(),d("p",N,c(l.email),1)):m("",!0)]),e("div",S,[s[9]||(s[9]=e("label",{class:"label"},"Password",-1)),e("div",I,[y(e("input",{"onUpdate:modelValue":s[2]||(s[2]=a=>t.password=a),class:"input",type:"password",placeholder:"Enter your password",onBlur:s[3]||(s[3]=a=>f("password"))},null,544),[[P,t.password]])]),l.password?(u(),d("p",Z,c(l.password),1)):m("",!0)]),r.value?(u(),d("div",G,[s[10]||(s[10]=e("label",{class:"label"},"Confirm Password",-1)),e("div",H,[y(e("input",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.confirmPassword=a),class:w(["input",{"is-danger":l.confirmPassword}]),type:"password",placeholder:"Confirm your password",onBlur:s[5]||(s[5]=a=>f("confirmPassword"))},null,34),[[P,t.confirmPassword]])]),l.confirmPassword?(u(),d("p",J,c(l.confirmPassword),1)):m("",!0)])):m("",!0),i.value?(u(),d("div",K,c(i.value),1)):m("",!0),e("div",Q,[e("p",W,[e("button",{onClick:g($,["prevent"]),class:w(["button is-primary",{"is-loading":n.value}]),disabled:n.value||!V.value},c(v.value),11,X)])])])])])])]))}}),ss=(h,p)=>{const r=h.__vccOpts||h;for(const[n,i]of p)r[n]=i;return r},os=ss(Y,[["__scopeId","data-v-80af4e4f"]]);export{os as default};
